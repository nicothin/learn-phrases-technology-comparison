# Реализация LearnPhrases на нескольких фреймворках: сравнение DX

Цель - сравнить DX при разработке проекта, более сложного чем todo-list. Автор уже несколько лет имеет опыт работы только с экосистемой React, можно считать, что прочие фреймворки ему в новинку.

Портировать будем проект LearnPhrases - serverless для запоминания иностранных слов/фраз периодическим повторением: пользователь добавляет фразы и их перевод, после чего повторяет цикл "я вижу слово/фразу на родном языке и должен вспомнить как это на изучаемом языке" и, после 10 раз успешного запоминания, слово/фраза считается запомненной.

Вся информация хранится в браузере пользователя (indexedDB), но есть экспорт/импорт в файл и в gist (если указать в настройках адрес и ключ).



## Сравниваемые фреймворки

Для каждого фреймворка создается ветка в репозитории с eslint и stylelint на прекоммит-хуке. Разработка на TS. Предполагается минимальное использование или отсутствие менеджеров состояний.

- React
- Vue.js
- Preact
- Svelte
- Solid
- Lit



## Критерии сравнения

1. Простота старта разработки.
2. Способ работы с роутами (якорными, они же - хеш-роуты).
3. Сложность реализации компонентов системы.
4. Вес бандла.


## Приведение условий

Все проекты будут собираться на vite. Старт - `npm create vite@latest` с выбором соответствующего фреймфорка. В каждом случае на прекоммит-хук добавлены `eslint` и `stylelint`.

После старта: `npm i -D husky lint-staged stylelint stylelint-config-standard`.

В `package.json` добавить (с вниманием к расширениям файлов):

```
"scripts": {
  "start": "vite",
  "prepare": "husky",
  "lint-staged": "lint-staged",
  "lint:eslint": "eslint **/*.{js,ts,tsx} --fix --quiet",
  "lint:stylelint": "stylelint \"*/**/*.css\""
},
"lint-staged": {
  "*/**/*.{js,ts,tsx}": [
    "eslint --fix"
  ],
  "*/**/*.css": [
    "stylelint"
  ]
}
```

В `.husky/pre-commit`:

```
npm run lint-staged
```

И потом - `npm i`



## Компоненты системы

Страницы:

- "Учить" - карусель с карточками (карточка - комбинация заучиваемого слова/фразы, перевода, уровня его знания и т.п.)
- "Управлять" - список заучиваемых слов/фраз.
- "О проекте" - просто текст.
- "Настройки" - настройки (настройки).

Есть общие компоненты:

- CSS custom properties - темизация, настройки внешнего вида.
- Глобальный стилевой файл - общие стили, типографика, раскладка для страниц, БЭМ-блоки с повтором в 1+ местах.
- Иконки в виде собранного SVG-спрайта (вариант с `svg -> defs -> symbol`).

И относительно самомтоятельные компоненты:

- Прогресс - горизонтальная линия (текстом - процентами), меняет цвет, когда заполнена.
- Карусель - 3 циклических слайда, показан один (для простоты - через `opacity`), методы `prev` и `next` (для реакции на клавиатуру/тач).
- Карточка - показ фразы, ее перевода, рейтинг выученности, доп. пояснений к фразе и переводу, id фразы, кнопки редактирования фразы.
- Рейтинг - строка из 10 иконок с галочкой (выделенных и/или невыделенных) с возможностью клика для указания рейтинга с соотв. коллбэком.
- Модальное окно - всплывающий элемент с произвольным контентом, кнопкой закрытия и бэкдропом. С управлением шириной, возможностью не-показа кнопки закрытия, коллбэком на закрытие.
- Текстовой инпут с возможностью увеличения высоты при вводе текста, счетчиком символов, возможность ограничить длину, состоянием "ошибка", двумя размерами поля и шрифта в нем.
- Чекбокс - самый обычный, с текстом и пояснением, с коллбэком на смену состояния.
- Подтверждатель - модальное окно с вопросом и его описанием (бэкдроп как у обычной модалки), кнопками подтверждения и отказа и коллбэками.
- Нотификации - блоки уведомлений в ВПУ (обычный, "успех", "ошибка"), собирающиеся в стек, пропадающие через 5 сек, с возможность закрыть кликом по иконке закрытия (но если навести курсор мыши - сами не пропадают).
- Дропдаун - элемент, реагирующий на клик/нажатие и показывающий полученное извне выпадающее меню с ручным управлением направления выпадения.
- Таблица слов/фраз - простейшая таблица, получающая описание колонок и массив данных, с колбэком на клик по строке.
- Пагинация - ряд из стрелки влево, малого текстового инпута (текущая стр.), слеша, цифры (общее кол-во страниц) и стрелки вправо. Получает общее число элементов, кол-во на 1 страницу и коллбэк на смену страницы (выдает новую страницу).
- Резолвер конфликтов (применяется при импорте слов/фраз) - список пар "карточек" с подсветкой отличающихся полей, возможностью выбрать один элемент из пары, подсветкой выбранного по умолчанию варианта.

### Дополнительные инструменты

- Преобразователь части MD-синтаксиса (заголовки, параграф, strong, em, del, подчеркивание) с возможностью расширения. Получает строку, возвращает строку.
- ArrayNavigator - получает массив, возвращает свойства  `nowIndex`, `nextIndex`, `prevIndex` и методы `goToNext` и `goToPrev` - навигация по массиву фраз для карусели.
- Инструменты работы с indexedDB.
- Инструменты работы с gist.
- Верификаторы, адаптеры и утилиты.
